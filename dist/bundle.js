!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(e,t){function n(e,t,n){var o,r,c,a,l;function i(){var s=Date.now()-a;s<t&&s>=0?o=setTimeout(i,t-s):(o=null,n||(l=e.apply(c,r),c=r=null))}null==t&&(t=100);var s=function(){c=this,r=arguments,a=Date.now();var s=n&&!o;return o||(o=setTimeout(i,t)),s&&(l=e.apply(c,r),c=r=null),l};return s.clear=function(){o&&(clearTimeout(o),o=null)},s.flush=function(){o&&(l=e.apply(c,r),c=r=null,clearTimeout(o),o=null)},s}n.debounce=n,e.exports=n},function(e,t,n){"use strict";n.r(t);const o="cdx-marker",r="inline-code",c="HEADER_1",a="HEADER_2",l="HEADER_3",i="UNORDERED_LIST",s="ORDERED_LIST",d="QUOTE",u="CODE",f={BOLD:new RegExp(/\*\*([\S]{1,})\*\*/),ITALIC:new RegExp(/__([\S]{1,})__/),MARKER:new RegExp(/==([\S]{1,})==/),INLINE_CODE:new RegExp(/\`([\S]{1,})\`/)},m="&nbsp;",p="inline_tmp_anchor",g=function(e){return{md:e[0],content:e[1],isValid:!0}},y=e=>{switch(e){case c:return{type:"header",toolData:{level:1},config:{}};case a:return{type:"header",toolData:{level:2},config:{}};case l:return{type:"header",toolData:{level:3},config:{}};case i:return{type:"list",toolData:{style:"unordered"},config:{}};case s:return{type:"list",toolData:{style:"ordered"},config:{}};case d:return{type:"quote",toolData:{},config:{}};case u:return{type:"code",toolData:{},config:{}};default:return{isInvalid:!1,type:"",toolData:"",config:""}}},b=(e,t)=>{const n=e.textContent.trim();let o=!0,r="";const f=" "===t;if(n.length>7)return{isValidMDStatus:!1,MDType:r};switch(!0){case"#"===n&&f:r=c;break;case"##"===n&&f:r=a;break;case("###"===n||"####"===n||"#####"===n||"######"===n)&&f:r=l;break;case"-"===n&&f:r=i;break;case"1"===n&&f:r=s;break;case">"===n&&f:r=d;break;case"```"===n:r=u;break;default:o=!1}return{isValidMDStatus:o,MDType:r}};var h=n(0);const v=function(e,t,n){let o=document.createElement("script");o.src=e,o.onload=t,o.onreadystatechange=t,n.appendChild(o)},D=(e,t=null,n={})=>{let o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(let e in n)"placeholder"===e?o.setAttribute("placeholder",n[e]):0===e.indexOf("data-")?o.setAttribute(e,n[e]):o[e]=n[e];return o},x=e=>{for(var t in e)return!1;return!0},E=(e,t)=>{const{length:n}=e;let o=-1;for(;++o<n;)if(t(e[o],o,e))return o;return-1},k=(e,t)=>{if(e.parentNode){const n=e.parentNode.querySelectorAll("."+t.styles.settingsButton);Array.from(n).forEach(e=>e.classList.remove(t.styles.settingsButtonActive))}e.classList.add(t.styles.settingsButtonActive)},R=e=>{const t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t)},S=e=>{let t,n;if(window.getSelection&&(t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();const a=document.createElement("div");a.innerHTML=e;for(var o,r,c=document.createDocumentFragment();o=a.firstChild;)r=c.appendChild(o);n.insertNode(c),r&&((n=n.cloneRange()).setStartAfter(r),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}},w=function(e){if(document.body.createTextRange){const t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else console.warn("Could not select text in node: Unsupported browser.")};n.d(t,"TriggerHub",function(){return T}),n.d(t,"debounce",function(){return h.debounce}),n.d(t,"loadJS",function(){return v}),n.d(t,"make",function(){return D}),n.d(t,"isEmptyObj",function(){return x}),n.d(t,"findIndex",function(){return E}),n.d(t,"highlightSettingIcon",function(){return k}),n.d(t,"moveCaretToEnd",function(){return R}),n.d(t,"selectNode",function(){return w}),n.d(t,"insertHtmlAtCaret",function(){return S});const T={handleMDShortcut:(e,t)=>{const n=t.blocks.getCurrentBlockIndex(),o=t.blocks.getBlockByIndex(n),{isValidMDStatus:r,MDType:c}=b(o,e.data);if(console.log("checkMarkdownSyntax(curBlock, ev.data) -> ",b(o,e.data)),!r)return!1;const{isInvalid:a,type:l,toolData:i,config:s}=y(c);console.log("markdownBlockConfig(MDType) -> ",y(c)),a||(console.log("api.blocks.delete: ",n),t.blocks.delete(n),t.blocks.insert(l,i,s,n),t.caret.setToBlock(n,"start"))},handleInlineMDShortcut:(e,t)=>{const n=t.blocks.getCurrentBlockIndex(),c=t.blocks.getBlockByIndex(n),{isValid:a,md:l,html:i}=((e,t)=>{const n=e.textContent.trim(),{BOLD:c,ITALIC:a,MARKER:l,INLINE_CODE:i}=f,s=n.match(c);if(s){const{isValid:e,md:t,content:n}=g(s);return{isValid:e,md:t,html:`<b>${n}</b>`}}const d=n.match(l);if(d){const{isValid:e,md:t,content:n}=g(d);return{isValid:e,md:t,html:`<mark class=${o}>${n}</mark>`}}const u=n.match(a);if(u){const{isValid:e,md:t,content:n}=g(u);return{isValid:e,md:t,html:`<i>${n}</i>`}}const m=n.match(i);if(m){const{isValid:e,md:t,content:n}=g(m);return{isValid:e,md:t,html:`<code class=${r}>${n}</code>`}}return{isValid:!1,text:""}})(c,e.data);if(a){const t=`<span id="${p}" />`;insertHtmlAtCaret(t),e.target.innerHTML=e.target.innerHTML.replace(l,i),selectNode(document.querySelector(`#${p}`)),document.querySelector(`#${p}`).remove(),insertHtmlAtCaret(m)}}}}])});